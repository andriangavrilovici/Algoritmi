import processing.serial.*;
int[] a = new int [20];
void setup(){
   size(1366, 768);
   for (int i=0; i<a.length; i++) {
    a[i] = (int)random(100);
  }frameRate(85);
}
/*rect(mutarea la >dreapta / <stanga 1, mutarea in <jos / >sus 2, grosimea 3, lungirea in jos 4, rotungirea 5);*/
int i=0,j=0,m=0,s=0;int iplus1=1;
void draw(){
  background(#102439);
  noStroke();
  fill(204, 102, 0);
  for(int k=0;k<a.length;k++){
    rect(20+20*k, 384-(30+1*a[k]), 15, 30+1*a[k], 7);
  }
  
  if(i<a.length && iplus1<a.length){
  if(a[i]>a[iplus1]){
    if(j<1)
      fill(246);
    else fill(#102439);
    rect(20+20*i, 384-(30+1*a[i]), 15, 30+1*a[i], 7);
    rect(20+20*(iplus1), 384-(30+1*a[iplus1]), 15, 30+1*a[iplus1], 7);
  }else{
    fill(102);
    rect(20+20*i, 384-(30+1*a[i]), 15, 30+1*a[i], 7);//i++;iplus1++;
  }
  if(a[i]>a[iplus1] && j<(30+1*a[i])+15){//dam in jos
    if(j<(30+1*a[i])+3)
      fill(246);
    else fill(#102439);
    rect(20+20*i, 384-(30+1*a[i])+j, 15, 30+1*a[i], 7);
    rect(20+20*(iplus1), 384-(30+1*a[iplus1])+j, 15, 30+1*a[iplus1], 7);
    if(j==(30+1*a[i])+3 && m<20){//schimbam dreapta/stanga
      if(m<20-1)
        fill(246);
      else fill(#102439);
      rect(20+20*i+m, 384-(30+1*a[i])+j, 15, 30+1*a[i], 7);
      rect(20+20*(iplus1)-m, 384-(30+1*a[iplus1])+j, 15, 30+1*a[iplus1], 7);
      if(m==20-1 && s<(30+1*a[i])+4){
        if(s<(30+1*a[i])+3)
          fill(246);
          else fill(204, 102, 0);
          if(s==(30+1*a[i])+3){
            int t=a[i];
            a[i]=a[iplus1];
            a[iplus1]=t;}
        rect(20+20*i, 384-(30+1*a[iplus1])+j-s, 15, 30+1*a[iplus1], 7);
        rect(20+20*(iplus1), 384-(30+1*a[i])+j-s, 15, 30+1*a[i], 7);s++;
      }else {m++;s=0;}
    }else {m=0;j++;}
  }else {
    j=0;i++;
    if(iplus1<a.length)iplus1++;
  }
 }else {i=0;iplus1=0;i++;iplus1++;}
  
  if(i>a.length-2){i=0;iplus1=1;}
}
